# Talking Tom Hackathon (Vue + FastAPI)

A hackathon-ready virtual pet game inspired by the classic pet-care loop. The cat **Kit** is powered by AI: it chats, speaks, reacts with voice and sound effects, and picks animations based on mood and context.

## What’s in the project

- **AI chat** — Talk to Kit via text or microphone (STT). Replies are generated by OpenAI or Google Gemini with structured output (mood, action, animation, optional sound-effect prompt).
- **Voice** — ElevenLabs Text-to-Speech for Kit’s replies and Speech-to-Text for the mic. Optional AI-generated **sound effects** (e.g. meow, crunch) played after the voice line.
- **Care actions** — Feed, Sleep, Clean, Play buttons update stats and trigger an AI reaction (short reply + SFX) and a matching animation (eat, chilling, clean, dancing).
- **Animations** — Default idle loop (transparent WebM) plus reaction clips chosen by the LLM from a curated list (happy, angry, eat, guitar, etc.). Green-screen source clips are chroma-keyed to WebM.
- **Proactive reminders** — When stats need attention (e.g. hunger low, energy low), the app periodically asks the AI for a short reminder and plays it as voice + optional SFX.
- **Shop & progression** — Hats and backgrounds, coins, XP, level. Stats (hunger, energy, hygiene, fun, mood) drive decay and mood; hunger is “fullness” (low = hungry).
- **Mini-game** — Simple catch game for extra coins/XP.

## Tech stack

- **Frontend:** Vue 3, Pinia, Vite, TypeScript.
- **Backend:** FastAPI, SQLite (profile and shop state).
- **AI:** OpenAI or Google Gemini (switch via `LLM_PROVIDER`) for chat, action feedback, and reminders; temperature tuned for varied replies.
- **Voice & SFX:** ElevenLabs (TTS, STT, Sound Effects API). Voice fallback if primary voice ID is missing.
- **Assets:** Static kit assets, transparent WebM animations served from backend; optional background removal for kit images (Pillow script in `scripts/remove_bg.py`).

## Requirements

- Node.js 18+
- Python 3.11+

## Quick start

### 1. Backend (FastAPI)

```bash
cd backend
python -m venv .venv
.venv\Scripts\activate   # Windows
# source .venv/bin/activate   # macOS/Linux
pip install -r requirements.txt
```

Copy env and set your API keys:

```bash
copy .env.example .env   # Windows
# cp .env.example .env   # macOS/Linux
```

Edit `.env`: set `LLM_PROVIDER` (e.g. `openai` or `gemini`) and the matching API key(s). Add `ELEVENLABS_API_KEY` for voice and sound effects.

```bash
uvicorn app.main:app --reload --host 0.0.0.0
```

Backend runs at **http://localhost:8000**.

### 2. Frontend (Vue 3 + Vite)

```bash
cd frontend
npm install
npm run dev
```

Frontend runs at **http://localhost:5173**. Open that URL in your browser.

## Environment variables

See `.env.example`. Main options:

- **LLM:** `LLM_PROVIDER` = `openai` | `gemini`; then `OPENAI_API_KEY` or `GEMINI_API_KEY`, and optional model names.
- **Voice:** `ELEVENLABS_API_KEY`, optional `ELEVENLABS_VOICE_ID`, `ELEVENLABS_TTS_MODEL`, `ELEVENLABS_STT_MODEL`.
- **Frontend:** `VITE_API_BASE` (default `http://localhost:8000`) if the API is elsewhere.

## Notes

- API base for the frontend defaults to `http://localhost:8000`. Override with `VITE_API_BASE` when needed.
- Player data is stored in `backend/data.sqlite`.
- Asset credits are in `CREDITS.md`.
- Idle and reaction animations live under `external_assets/animations_cat/` (backend serves them at `/assets/animations_cat/`). New green-screen clips can be converted with ffmpeg chroma key and added to `cat_videos.json`.
